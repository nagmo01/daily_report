# 2023/12/22の日報


## 取り組んだこと
- PRの修正
- herokuにデプロイしてもうまくサイトが表示されない理由を調べた

## わかったこと
- heroku（本番環境）だとテーブルのカラムを追加したり削除したりするマイグレーションはできないっぽい？する場合pg:resetとかで最初から


## 次やること
- PRで修正がきたら対応
- PR出す
- チェックアウト機能に入る

## 感じたこと

## 学習時間
- TODAY: 1.5h
- TOTAL: 517h



## 今日の学習メモ


#### 今日やること
~~- herokuにデプロイできない理由調査~~
~~- PR再提出~~
- チェックアウト機能を考えていく。



### herokuがうまくいかなかった理由

まず最初にpushしたときは前回のコミットからマイグレファイルを変更していたため、うまくいかなかった。
ここで自分が一回削除してデプロイし直した方がスムーズじゃないかと思いそれを実行した。
（今思うとこの選択は悪くなかったがherokuでやらなければいけないことをすっかりわすれていたため後のハマりに繋がった）

全体的にうまくいったが
最後に$heroku openで確認しようとすると
サイトエラーにあり、
logsを確認すると
503が表示されている状態だった。

結果的にheroku run bashに入ってもう一度rails sを実行したところ解決に辿り着けるログが確認できたのでなんとかなった。
結果、AWSの環境変数をherokuに指定してなかったことが原因だった。

それもなんとなくよぎっていたがS3が使えないことによる画像のアタッチがうまくいかない程度の話でサイト自体まったく表示されない原因になるとは思わなかった。

heroku config:set AWS_ACCESS_KEY="daijdsjegwjarfrejehi"
のような感じで個別に設定したらうまく表示させられた。

